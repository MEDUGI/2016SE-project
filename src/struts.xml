<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
        "http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>
    <package name="register-login" extends="struts-default">
        <action name="register_stu" class="action.register_stu">
            <result name="SUCCESS" type="chain">
                <param name="actionName"> mainpage </param>
            </result>
            <result name="NULL">/null.jsp</result>
            <result name="NOT_SAME">/not_same.jsp</result>
            <result name="MAIL">/mail.jsp</result>
        </action>

        <action name="register_teacher" class="action.register_teacher">
            <result name="SUCCESS" type="chain">
                <param name="actionName"> mainpage </param>
                <param name="isStudent"> false </param>
                <param name="isProfessor"> true </param>
                <param name="username"> ${mail}</param>
            </result>
            <result name="NULL">/null.jsp</result>
            <result name="NOT_SAME">/not_same.jsp</result>
            <result name="MAIL">/mail.jsp</result>
        </action>

        <action name="login_admin" class="action.login_admin">
            <result name="SUCCESS">/admin.jsp</result>
            <result name="PASSWORD">/password.jsp</result>
            <result name="ACCOUNT">/account.jsp</result>
        </action>

        <action name="login_normal" class="action.login_normal">
            <result name="STUDENT" type="chain">
                <param name="actionName"> mainpage </param>
                <param name="isStudent"> true </param>
                <param name="isProfessor"> false </param>
                <param name="username"> ${account}</param>
            </result>
            <result name="TEACHER" type="chain">
                <param name="actionName"> mainpage </param>
                <param name="isStudent"> false </param>
                <param name="isProfessor"> true </param>
                <param name="username"> ${account}</param>
            </result>
            <result name="PASSWORD">/password.jsp</result>
            <result name="ACCOUNT">/account.jsp</result>
        </action>

        <action name="change_password" class="action.change_password">
            <result name="NULL">/null.jsp</result>
            <result name="NOT_SAME">/not_same.jsp</result>
            <result name="MAIL">/mail.jsp</result>
            <result name="SUCCESS">/index.jsp</result>
            <result name="ACCOUNT">/account.jsp</result>
        </action>
    </package>
    <package name="mainpagePack" extends="struts-default">
        <action name="mainpage" class="action.mainpageAction">
            <result name="SUCCESS">/mainpage.jsp</result>
            <interceptor-ref name="chain"></interceptor-ref>
            <interceptor-ref name="cookie">
                <param name="cookiesName">username,*</param>
                <param name="cookiesValue">*</param>
            </interceptor-ref>
            <result name="error">/index.jsp</result>
        </action>
        <action name="showGradSchool" class="action.showGradSchoolAction">
            <result name="success">
                /mainpageJsps/showGradSchoolJSP.jsp
            </result>
        </action>
    </package>

    <package name="sendAndReceiveMessage" extends="struts-default">
        <action name="editMessage" class="action.editMessage">
            <result name="SUCCESS"> /message.jsp </result>
        </action>
        <action name="sendMessage" class="action.sendMessage">
            <result name="SUCCESS" type="chain">
                <param name="actionName"> editMessage </param>
                <param name="isSuccess"> true </param>
                <param name="returnMessage"> "成功发信" </param>
            </result>
            <result name="USER_CANNOT_FIND" type="chain">
                <param name="actionName"> editMessage</param>
                <param name="isSuccess"> false</param>
                <param name="returnMessage"> "未找到用户" </param>
            </result>
            <result name="INVALID_USER" type="chain">
                <param name="actionName"> editMessage</param>
                <param name="isSuccess"> false</param>
                <param name="returnMessage"> "您未登陆" </param>
            </result>
            <result name="MESSAGE_INVALID" type="chain">
                <param name="actionName"> editMessage</param>
                <param name="isSuccess"> false</param>
                <param name="returnMessage"> "信息含有威胁或者不合法内容" </param>
            </result>
        </action>
    </package>

    <package name="Application" extends="struts-default">
        <action name="editApplicatin" class="action.editApplication">
            <result name="SUCCESS"> /editApplication.jsp </result>
        </action>
        <action name="putUpApplication" class="action.putUpApplication">
            <result name="SUCCESS" type="chain">
                <param name="actionName"> successApply </param>
                <param name="isSuccess"> true </param>
                <param name="returnMessage"> 申请已成功提交，请等待审核 </param>
            </result>
            <result name="OUT_OF_AMOUNT" type="chain">
                <param name="actionName"> failApply </param>
                <param name="isSuccess"> false</param>
                <param name="returnMessage"> 申请人数已满 </param>
            </result>
            <result name="MESSAGE_INVALID" type="chain">
                <param name="actionName"> failApply </param>
                <param name="isSuccess"> false</param>
                <param name="returnMessage"> 信息含有威胁或者不合法内容 </param>
            </result>
        </action>
    </package>

    <package name="Recommand" extends="struts-default">
        <action name="recommand" class="action.recommand">
            <result name="SUCCESS">
                /recommand.jsp
            </result>
        </action>
    </package>
</struts>